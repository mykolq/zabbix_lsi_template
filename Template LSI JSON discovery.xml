<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.2</version>
    <date>2019-07-03T12:17:59Z</date>
    <groups>
        <group>
            <name>LSI</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template LSI JSON discovery</template>
            <name>Template LSI JSON discovery</name>
            <description/>
            <groups>
                <group>
                    <name>LSI</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>LSI battery</name>
                </application>
                <application>
                    <name>LSI controllers</name>
                </application>
                <application>
                    <name>LSI Internal items</name>
                </application>
                <application>
                    <name>LSI Logical disks</name>
                </application>
                <application>
                    <name>LSI Physical disks</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>All bbus info</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.bbusinfo</key>
                    <delay>{$ADAP_REQUEST_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PEIOD}</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <output_format>0</output_format>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <master_item/>
                </item>
                <item>
                    <name>All Ctls info</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.ctlsinfo</key>
                    <delay>{$ADAP_REQUEST_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PEIOD}</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <output_format>0</output_format>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <master_item/>
                </item>
                <item>
                    <name>All cvs info</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.cvsinfo</key>
                    <delay>{$ADAP_REQUEST_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PEIOD}</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <output_format>0</output_format>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <master_item/>
                </item>
                <item>
                    <name>All Lds info</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.ldsinfo</key>
                    <delay>{$LD_REQUEST_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PEIOD}</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <output_format>0</output_format>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <master_item/>
                </item>
                <item>
                    <name>All Pds info</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.pdsinfo</key>
                    <delay>{$PD_REQUEST_PERIOD}</delay>
                    <history>{$INTERNAL_ITEMS_HISTORY_PEIOD}</history>
                    <trends>0</trends>
                    <status>0</status>
                    <value_type>4</value_type>
                    <allowed_hosts/>
                    <units/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>LSI Internal items</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                    <preprocessing/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <output_format>0</output_format>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <master_item/>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Controllers discovery</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.ctllld</key>
                    <delay>{$ADAP_DISCOVERY_PERIOD}</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache bbu data</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][{#CTLID}]</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>18</type>
                                    <params>(&quot;Status&quot;\s:\s&quot;Failure&quot;)
\1</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>12</type>
                                    <params>$['Response Data']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.bbusinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu low charge level</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbulowcharge.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['BBU_Firmware_Status'][10]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu need to replace</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbureplace.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['BBU_Firmware_Status'][9]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu serial number</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbusn.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['BBU_Design_Info'][4]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu state</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbustate.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['BBU_Info'][4]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; bbu type</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.bbutype.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['BBU_Info'][0]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.bbu.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault data</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.cvdata.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Internal items</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][{#CTLID}]</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>18</type>
                                    <params>(&quot;Status&quot;\s:\s&quot;Failure&quot;)
\1</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>12</type>
                                    <params>$['Response Data']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.cvsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault need to replace</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.cvreplace.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Firmware_Status'][0]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.cvdata.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault serial number</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.cvsn.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Design_Info'][1]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.cvdata.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault state</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.cvstate.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Cachevault_Info'][2]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.cvdata.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; cache vault type</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.cvtype.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI battery</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Cachevault_Info'][0]['Value']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctl.cvdata.[&quot;{#CTLID}&quot;]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; model</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.model.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Basics']['Model']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctlsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; serial number</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.sn.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Basics']['Serial Number']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctlsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Controller &quot;{#CTLID}&quot; state (health)</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ctl.state.[&quot;{#CTLID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$ADAP_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI controllers</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][{#CTLID}]['Response Data']['Status']['Controller Status']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ctlsinfo</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.ctl.bbulowcharge.[&quot;{#CTLID}&quot;].str(No)}=0 and {Template LSI JSON discovery:lsi.ctl.bbulowcharge.[&quot;{#CTLID}&quot;].strlen()}&gt;0</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} battery charge level is low</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.bbureplace.[&quot;{#CTLID}&quot;].str(No)}=0 and {Template LSI JSON discovery:lsi.ctl.bbureplace.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} bbu battery is need to be replaced</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.bbustate.[&quot;{#CTLID}&quot;].str(Optimal)}=0 and {Template LSI JSON discovery:lsi.ctl.bbustate.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE}</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.bbusn.[&quot;{#CTLID}&quot;].diff()}=1 and {Template LSI JSON discovery:lsi.ctl.bbusn.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>2</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} bbu battery was replaced</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.cvreplace.[&quot;{#CTLID}&quot;].str(No)}=0 and {Template LSI JSON discovery:lsi.ctl.cvreplace.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} cachevault battery is need to be replaced</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.cvstate.[&quot;{#CTLID}&quot;].str(Optimal)}=0 and {Template LSI JSON discovery:lsi.ctl.cvstate.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>0</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE}</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.ctl.cvsn.[&quot;{#CTLID}&quot;].diff()}=1 and {Template LSI JSON discovery:lsi.ctl.cvsn.[&quot;{#CTLID}&quot;].strlen()}&gt;0)</expression>
                            <recovery_mode>2</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} cachevault battery was replaced</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.ctl.state.[&quot;{#CTLID}&quot;].str(Opt)}=0</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.ctl.state.[&quot;{#CTLID}&quot;].str(Opt)}=1</recovery_expression>
                            <name>LSI controller {#CTLID} status is {ITEM.LASTVALUE}</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>4</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags>
                                <tag>
                                    <tag>RAID_CTL_STATE</tag>
                                    <value>{ITEM.LASTVALUE}</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.ctl.sn.[&quot;{#CTLID}&quot;].diff()}=1 and {Template LSI JSON discovery:lsi.ctl.sn.[&quot;{#CTLID}&quot;].strlen()}&gt;0</expression>
                            <recovery_mode>2</recovery_mode>
                            <recovery_expression/>
                            <name>LSI controller {#CTLID} was replaced</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CTLID}</lld_macro>
                            <path>$.Ctl</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>16</type>
                            <params>$['Controllers'][0]['Command Status']['Detailed Status'][0]['ErrMsg']</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                        <step>
                            <type>12</type>
                            <params>$['Controllers'][0]['Response Data']['System Overview']</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                        <step>
                            <type>20</type>
                            <params>{$ADAP_THROTTLING_HB_PERIOD}</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                    </preprocessing>
                    <master_item/>
                </discovery_rule>
                <discovery_rule>
                    <name>Logical disks discovery</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.ldlld</key>
                    <delay>{$LD_DISCOVERY_PERIOD}</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>Logical disk &quot;{#LDNAME}&quot; (id {#LDID}) level</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ld.level.[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['{#LDID}'][0]['TYPE']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ldsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Logical disk &quot;{#LDNAME}&quot; (id {#LDID})  state</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.ld.state.[&quot;{#LDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$LD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Logical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['{#LDID}'][0]['State']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$LD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>21</type>
                                    <params>switch(value)
{
case 'Optl':
value='Optimal';
break;
case 'OfLn':
value='Offline';
break;
case 'Pdgd':
value='Partially degraded';
break;
case 'Dgrd':
value='Degraded';
break;
}
return value</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.ldsinfo</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.ld.state.[&quot;{#LDID}&quot;].str(Optimal)}=0</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.ld.state.[&quot;{#LDID}&quot;].str(Optimal)}=1</recovery_expression>
                            <name>LSI logical disk &quot;{#LDNAME}&quot; (&quot;{#LDID}&quot;) state is &quot;{ITEM.LASTVALUE}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>4</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>0</manual_close>
                            <dependencies/>
                            <tags>
                                <tag>
                                    <tag>LD STATE</tag>
                                    <value>{ITEM.LASTVALUE}</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#LDID}</lld_macro>
                            <path>$.LDID</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#LDNAME}</lld_macro>
                            <path>$.Name</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>21</type>
                            <params>var JsonValue = JSON.parse(value);
var ResponseStatus=JsonValue.Controllers[0]['Command Status']['Status'];
var TxtValue='';
if (ResponseStatus.match(/Success/g)) {
var ResponseData = JsonValue.Controllers[0]['Response Data'];
var NeedData = [];
var i=0;
for (var key in ResponseData) {
	if (key.match(/\/c\d{1,}\/v\d{1,}/g)) {
		 JsonValue.Controllers[0]['Response Data'][key][0]['LDID'] = key;
		 NeedData[i] = JsonValue.Controllers[0]['Response Data'][key][0];
		 i = i + 1;
	}
}
TxtValue = JSON.stringify(NeedData);
}
else {
TxtValue = JsonValue.Controllers[0]['Command Status']['Description'];
}
return TxtValue</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                        <step>
                            <type>20</type>
                            <params>{$LD_THROTTLING_HB_PERIOD}</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                    </preprocessing>
                    <master_item/>
                </discovery_rule>
                <discovery_rule>
                    <name>Physical disks discovery</name>
                    <type>0</type>
                    <snmp_community/>
                    <snmp_oid/>
                    <key>lsi.pdlld</key>
                    <delay>{$PD_DISCOVERY_PERIOD}</delay>
                    <status>0</status>
                    <allowed_hosts/>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <params/>
                    <ipmi_sensor/>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <filter>
                        <evaltype>0</evaltype>
                        <formula/>
                        <conditions/>
                    </filter>
                    <lifetime>30d</lifetime>
                    <description/>
                    <item_prototypes>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; media error count</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.merrcount.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TRENDS_PERIOD}</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID} - Detailed Information']['Drive {#PDID} State']['Media Error Count']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; model</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.model.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID}'][0]['Model']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; other error count</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.otherrcount.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TRENDS_PERIOD}</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID} - Detailed Information']['Drive {#PDID} State']['Other Error Count']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; predictive failure count</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.predicterrcount.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>{$PD_TRENDS_PERIOD}</trends>
                            <status>0</status>
                            <value_type>3</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID} - Detailed Information']['Drive {#PDID} State']['Predictive Failure Count']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; SMART flag</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.smartflag.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>1</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID} - Detailed Information']['Drive {#PDID} State']['S.M.A.R.T alert flagged by drive']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; serial number</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.sn.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID} - Detailed Information']['Drive {#PDID} Device attributes']['SN']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Physical disk &quot;{#PDID}&quot; state</name>
                            <type>18</type>
                            <snmp_community/>
                            <snmp_oid/>
                            <key>lsi.pd.state.[&quot;{#PDID}&quot;]</key>
                            <delay>0</delay>
                            <history>{$PD_HISTORY_PERIOD}</history>
                            <trends>0</trends>
                            <status>0</status>
                            <value_type>4</value_type>
                            <allowed_hosts/>
                            <units/>
                            <snmpv3_contextname/>
                            <snmpv3_securityname/>
                            <snmpv3_securitylevel>0</snmpv3_securitylevel>
                            <snmpv3_authprotocol>0</snmpv3_authprotocol>
                            <snmpv3_authpassphrase/>
                            <snmpv3_privprotocol>0</snmpv3_privprotocol>
                            <snmpv3_privpassphrase/>
                            <params/>
                            <ipmi_sensor/>
                            <authtype>0</authtype>
                            <username/>
                            <password/>
                            <publickey/>
                            <privatekey/>
                            <port/>
                            <description/>
                            <inventory_link>0</inventory_link>
                            <applications>
                                <application>
                                    <name>LSI Physical disks</name>
                                </application>
                            </applications>
                            <valuemap/>
                            <logtimefmt/>
                            <preprocessing>
                                <step>
                                    <type>12</type>
                                    <params>$['Controllers'][0]['Response Data']['Drive {#PDID}'][0]['State']</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>20</type>
                                    <params>{$PD_THROTTLING_HB_PERIOD}</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                                <step>
                                    <type>21</type>
                                    <params>switch(value)
{
case 'Onln':
value='Online';
break;
case 'Ugood':
value='Unconfigured-Good';
break;
case 'Ubad':
value='Unconfigured-Bad';
break;
case 'Msng':
value='Missing';
break;
case 'Offln':
value='Offline';
break;
case 'F':
value='Foreign';
break;
case 'GHS':
value='Global Hot Spare';
break;
case 'DHS':
value='Dedicated Hot Spare';
break;
case 'Rbld':
value='Rebuild';
break;
}
return value</params>
                                    <error_handler>0</error_handler>
                                    <error_handler_params/>
                                </step>
                            </preprocessing>
                            <jmx_endpoint/>
                            <timeout>3s</timeout>
                            <url/>
                            <query_fields/>
                            <posts/>
                            <status_codes>200</status_codes>
                            <follow_redirects>1</follow_redirects>
                            <post_type>0</post_type>
                            <http_proxy/>
                            <headers/>
                            <retrieve_mode>0</retrieve_mode>
                            <request_method>0</request_method>
                            <output_format>0</output_format>
                            <allow_traps>0</allow_traps>
                            <ssl_cert_file/>
                            <ssl_key_file/>
                            <ssl_key_password/>
                            <verify_peer>0</verify_peer>
                            <verify_host>0</verify_host>
                            <application_prototypes/>
                            <master_item>
                                <key>lsi.pdsinfo</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>({Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Unconfigured-Bad)}=1 or {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Unconfigured-Good)}=1 or {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Missing)}=1 or {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Offline)}=1 or {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Foreign)}=1) and {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].diff()}=1 and {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].strlen()}&gt;0</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Unconfigured-Good)}=1 or {Template LSI JSON discovery:lsi.pd.state.[&quot;{#PDID}&quot;].str(Online)}=1</recovery_expression>
                            <name>LSI physical disk &quot;{#PDID}&quot; is &quot;{ITEM.LASTVALUE}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>4</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags>
                                <tag>
                                    <tag>PD STATE</tag>
                                    <value>{ITEM.LASTVALUE}</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.pd.merrcount.[&quot;{#PDID}&quot;].last()}&gt;0</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.pd.merrcount.[&quot;{#PDID}&quot;].last()}=0</recovery_expression>
                            <name>LSI physical disk &quot;{#PDID}&quot; media error count is &quot;{ITEM.LASTVALUE}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}&gt;0</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}=0</recovery_expression>
                            <name>LSI physical disk &quot;{#PDID}&quot; predictive failure count is &quot;{ITEM.LASTVALUE}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>2</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}&gt;0 and {Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].diff()}=1</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}=0</recovery_expression>
                            <name>LSI physical disk &quot;{#PDID}&quot; predictive failure count is &quot;{ITEM.LASTVALUE}&quot;. Growing up</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>2</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>LSI physical disk &quot;{#PDID}&quot; predictive failure count is &quot;{ITEM.LASTVALUE}&quot;</name>
                                    <expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}&gt;0</expression>
                                    <recovery_expression>{Template LSI JSON discovery:lsi.pd.predicterrcount.[&quot;{#PDID}&quot;].last()}=0</recovery_expression>
                                </dependency>
                            </dependencies>
                            <tags/>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.pd.sn.[&quot;{#PDID}&quot;].diff()}=1 and {Template LSI JSON discovery:lsi.pd.sn.[&quot;{#PDID}&quot;].strlen(#2)}&gt;0</expression>
                            <recovery_mode>2</recovery_mode>
                            <recovery_expression/>
                            <name>LSI physical disk &quot;{#PDID}&quot; was replaced by sn  &quot;{ITEM.LASTVALUE1}&quot;.  Previous sn: &quot;{ITEM.LASTVALUE2}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>1</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags>
                                <tag>
                                    <tag>PD REPLACE</tag>
                                    <value>{ITEM.LASTVALUE1}</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                        <trigger_prototype>
                            <expression>{Template LSI JSON discovery:lsi.pd.smartflag.[&quot;{#PDID}&quot;].str(Yes)}=1</expression>
                            <recovery_mode>1</recovery_mode>
                            <recovery_expression>{Template LSI JSON discovery:lsi.pd.smartflag.[&quot;{#PDID}&quot;].str(No)}=1</recovery_expression>
                            <name>LSI physical disk: SMART flag was raised up on &quot;{#PDID}&quot;</name>
                            <correlation_mode>0</correlation_mode>
                            <correlation_tag/>
                            <url/>
                            <status>0</status>
                            <priority>3</priority>
                            <description/>
                            <type>0</type>
                            <manual_close>1</manual_close>
                            <dependencies/>
                            <tags>
                                <tag>
                                    <tag>PD SMART</tag>
                                    <value>{ITEM.LASTVALUE}</value>
                                </tag>
                            </tags>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes/>
                    <host_prototypes/>
                    <jmx_endpoint/>
                    <timeout>3s</timeout>
                    <url/>
                    <query_fields/>
                    <posts/>
                    <status_codes>200</status_codes>
                    <follow_redirects>1</follow_redirects>
                    <post_type>0</post_type>
                    <http_proxy/>
                    <headers/>
                    <retrieve_mode>0</retrieve_mode>
                    <request_method>0</request_method>
                    <allow_traps>0</allow_traps>
                    <ssl_cert_file/>
                    <ssl_key_file/>
                    <ssl_key_password/>
                    <verify_peer>0</verify_peer>
                    <verify_host>0</verify_host>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#PDID}</lld_macro>
                            <path>$.PDID</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>21</type>
                            <params>var JsonValue = JSON.parse(value);
var ResponseStatus=JsonValue.Controllers[0]['Command Status']['Status'];
var TxtValue='';
if (ResponseStatus.match(/Success/g)) {
var ResponseData = JsonValue.Controllers[0]['Response Data'];
var NeedData = [];
var i=0;
for (var key in ResponseData) {
	var KeySplitted = key.split(' ');
	if (KeySplitted.length === 2) {
		 JsonValue.Controllers[0]['Response Data'][key][0]['PDID'] = KeySplitted[1];
		 NeedData[i] = JsonValue.Controllers[0]['Response Data'][key][0];
		 i = i + 1;
	}
}
TxtValue = JSON.stringify(NeedData);
}
else{
TxtValue = JsonValue.Controllers[0]['Description'];
}
return TxtValue</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                        <step>
                            <type>20</type>
                            <params>{$PD_THROTTLING_HB_PERIOD}</params>
                            <error_handler>0</error_handler>
                            <error_handler_params/>
                        </step>
                    </preprocessing>
                    <master_item/>
                </discovery_rule>
            </discovery_rules>
            <httptests/>
            <macros>
               <macro>
                    <macro>{$ADAP_DISCOVERY_PERIOD}</macro>
                    <value>1d</value>
                </macro>
                <macro>
                    <macro>{$ADAP_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                </macro>
                <macro>
                    <macro>{$ADAP_REQUEST_PERIOD}</macro>
                    <value>1h</value>
                </macro>
                <macro>
                    <macro>{$ADAP_THROTTLING_HB_PERIOD}</macro>
                    <value>10800</value>
                </macro>
                <macro>
                    <macro>{$INTERNAL_ITEMS_HISTORY_PEIOD}</macro>
                    <value>0</value>
                </macro>
                <macro>
                    <macro>{$LD_DISCOVERY_PERIOD}</macro>
                    <value>6h</value>
                </macro>
                <macro>
                    <macro>{$LD_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                </macro>
                <macro>
                    <macro>{$LD_REQUEST_PERIOD}</macro>
                    <value>5m</value>
                </macro>
                <macro>
                    <macro>{$LD_THROTTLING_HB_PERIOD}</macro>
                    <value>10800</value>
                </macro>
                <macro>
                    <macro>{$PD_DISCOVERY_PERIOD}</macro>
                    <value>30m</value>
                </macro>
                <macro>
                    <macro>{$PD_HISTORY_PERIOD}</macro>
                    <value>30d</value>
                </macro>
                <macro>
                    <macro>{$PD_REQUEST_PERIOD}</macro>
                    <value>5m</value>
                </macro>
                <macro>
                    <macro>{$PD_THROTTLING_HB_PERIOD}</macro>
                    <value>10800</value>
                </macro>
                <macro>
                    <macro>{$PD_TRENDS_PERIOD}</macro>
                    <value>365d</value>
                </macro>
	    </macros>
            <templates/>
            <screens/>
            <tags/>
        </template>
    </templates>
</zabbix_export>
